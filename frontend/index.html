<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>inChurch Ops | Gest√£o de Louvor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Spartan:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/app/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand-wrap">
        <h1>familia.</h1>
      </div>
      <div class="top-actions">
        <button id="theme-toggle" class="btn theme-toggle" type="button" aria-label="Alternar tema" title="Alternar tema">
          <span class="theme-icon theme-icon-sun" aria-hidden="true">‚òÄ</span>
          <span class="theme-icon theme-icon-moon" aria-hidden="true">‚òæ</span>
        </button>
        <button class="icon-btn" type="button" aria-label="Notifica√ß√µes">üîî</button>
        <button id="open-account-panel" class="icon-btn" type="button" aria-label="Configura√ß√µes">‚öô</button>
        <img id="profile-photo-preview" class="top-avatar" alt="Foto de perfil" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=96&q=80" />
        <span id="logged-user"></span>
        <button id="logout-btn" class="btn primary">Sair</button>
      </div>
    </header>

    <main class="container">
      <section id="auth-card" class="card auth-card">
        <h2>Entrar na plataforma</h2>
        <p>Gest√£o de volunt√°rios, escala e repert√≥rio com fluxo de aprova√ß√£o.</p>
        <form id="login-form" class="stack">
          <input id="login-email" type="email" placeholder="Email" required />
          <input id="login-password" type="password" placeholder="Senha" required />
          <button type="submit" class="btn primary">Entrar</button>
        </form>
        <small>
          Admin: admin@igreja.local / admin123<br />
          L√≠der: lider@igreja.local / lider123<br />
          Volunt√°rio: voluntario@igreja.local / voluntario123
        </small>
      </section>

      <section id="workspace" class="workspace hidden">
        <aside class="card sidebar">
          <button class="tab active" data-tab="dashboard">
            <span class="tab-icon">‚åó</span><span class="tab-label">Dashboard</span>
          </button>
          <button class="tab" data-tab="voluntarios">
            <span class="tab-icon">üë•</span><span class="tab-label">Volunt√°rios</span>
          </button>
          <button class="tab" data-tab="repertorio" data-feature="repertoire">
            <span class="tab-icon">‚ô™</span><span class="tab-label">Repert√≥rio</span>
          </button>
          <button class="tab" data-tab="cultos">
            <span class="tab-icon">‚èµ</span><span class="tab-label">Cultos</span>
          </button>
          <button class="tab" id="volunteer-pending-tab" data-tab="cultos" data-role="VOLUNTARIO">
            <span class="tab-icon">!</span><span class="tab-label">Aprova√ß√µes pendentes</span>
          </button>
          <button class="tab" data-tab="planejamento" data-role="ADMIN,LIDER_MINISTERIO">
            <span class="tab-icon">‚åö</span><span class="tab-label">Planejamento</span>
          </button>
          <button class="tab" data-tab="aprovacoes" data-role="ADMIN,LIDER_MINISTERIO">
            <span class="tab-icon">‚úì</span><span class="tab-label">Aprova√ß√µes</span>
          </button>
          <button class="tab" data-tab="notificacoes">
            <span class="tab-icon">üîî</span><span class="tab-label">Notifica√ß√µes</span>
          </button>
          <button class="tab" data-tab="registros" data-role="ADMIN,LIDER_MINISTERIO">
            <span class="tab-icon">üìù</span><span class="tab-label">Registros</span>
          </button>
          <button class="tab" data-tab="ministerios" data-role="ADMIN">
            <span class="tab-icon">‚åò</span><span class="tab-label">Minist√©rios</span>
          </button>
        </aside>

        <section id="tab-dashboard" class="card panel">
          <h2>Central do Minist√©rio</h2>
          <div id="stats" class="stats"></div>
          <div id="status-summary" class="status-bar-wrap">
            <div class="status-bar">
              <span id="status-green" class="status-segment status-green"></span>
              <span id="status-yellow" class="status-segment status-yellow"></span>
              <span id="status-red" class="status-segment status-red"></span>
            </div>
            <p id="status-text" class="status-text"></p>
          </div>
          <div class="dashboard-grid">
            <article class="card mini-panel" data-feature="repertoire">
              <h3>Repert√≥rio em Destaque</h3>
              <ul id="dashboard-repertoire" class="list"></ul>
            </article>
            <article class="card mini-panel">
              <h3>Pr√≥ximos Cultos</h3>
              <ul id="dashboard-services" class="list"></ul>
            </article>
          </div>
        </section>

        <section id="tab-voluntarios" class="card panel hidden">
          <h2>Volunt√°rios e Agenda</h2>
          <form id="user-form" class="form-grid" data-role="ADMIN">
            <input id="user-name" placeholder="Nome" required />
            <input id="user-email" type="email" placeholder="Email" required />
            <input id="user-phone" placeholder="Telefone" />
            <input id="user-password" type="password" placeholder="Senha inicial" required />
            <select id="user-role" required>
              <option value="">Perfil</option>
              <option value="LIDER_MINISTERIO">L√≠der de minist√©rio</option>
              <option value="VOLUNTARIO">Volunt√°rio</option>
            </select>
            <select id="user-ministry" multiple></select>
            <button type="submit" class="btn primary">Criar usu√°rio</button>
          </form>

          <form id="availability-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO,VOLUNTARIO">
            <select id="availability-user"></select>
            <input id="availability-start" type="date" required />
            <input id="availability-end" type="date" required />
            <input id="availability-reason" placeholder="Motivo do bloqueio" />
            <button type="submit" class="btn primary">Bloquear agenda</button>
          </form>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Email</th>
                  <th>Perfil</th>
                  <th>Minist√©rios</th>
                  <th>Status</th>
                  <th>A√ß√£o</th>
                </tr>
              </thead>
              <tbody id="users-table"></tbody>
            </table>
          </div>

          <h3>Bloqueios de Agenda</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Volunt√°rio</th>
                  <th>Per√≠odo</th>
                  <th>Motivo</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="availability-table"></tbody>
            </table>
          </div>
        </section>

        <section id="tab-repertorio" class="card panel hidden">
          <h2>Repert√≥rio</h2>
          <form id="song-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
            <input id="song-title" placeholder="M√∫sica" required />
            <input id="song-key" placeholder="Tom" required />
            <input id="song-bpm" type="number" min="40" max="260" placeholder="BPM" />
            <input id="song-link" type="url" placeholder="Link web (YouTube/Spotify/Cifra)" />
            <input id="song-tags" placeholder="Tags separadas por v√≠rgula" />
            <button type="submit" class="btn primary">Adicionar m√∫sica</button>
          </form>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>M√∫sica</th>
                  <th>Tom</th>
                  <th>BPM</th>
                  <th>Link</th>
                  <th>Tags</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="songs-table"></tbody>
            </table>
          </div>
        </section>

        <section id="tab-cultos" class="card panel hidden">
          <h2>Gest√£o de Cultos</h2>
          <form id="service-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
            <input id="service-date" type="date" required />
            <input id="service-time" type="time" />
            <input id="service-title" placeholder="T√≠tulo do culto" required />
            <input id="service-notes" placeholder="Observa√ß√µes" />
            <input id="service-tags" placeholder="Tags do culto (v√≠rgula)" />
            <button type="submit" class="btn primary">Criar culto</button>
          </form>

          <form id="service-search-form" class="form-grid">
            <input id="service-query" placeholder="Buscar por nome do culto" />
            <input id="service-query-date" type="date" />
            <button type="submit" class="btn ghost">Pesquisar cultos</button>
          </form>
          <div id="services-list" class="service-list"></div>

          <div id="service-modal" class="modal-backdrop hidden">
            <div class="modal-card">
              <div class="modal-head">
                <h3 id="service-detail-title">Detalhes do culto</h3>
                <button id="service-modal-close" class="btn ghost" type="button">Fechar</button>
              </div>
              <p id="service-detail-empty" class="hidden">Selecione um culto para editar e montar repert√≥rio/escala.</p>

              <div id="service-detail-content" class="hidden">
                <form id="service-edit-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
                  <input id="detail-service-date" type="date" required />
                  <input id="detail-service-time" type="time" />
                  <input id="detail-service-title-input" placeholder="T√≠tulo" required />
                  <input id="detail-service-notes" placeholder="Observa√ß√µes" />
                  <input id="detail-service-tags" placeholder="Tags do culto (v√≠rgula)" />
                  <button type="submit" class="btn primary">Salvar altera√ß√µes</button>
                </form>
                <button id="detail-delete-service" class="btn danger" data-role="ADMIN,LIDER_MINISTERIO">Excluir culto</button>

                <form id="setlist-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
                  <input id="setlist-song-query" placeholder="Buscar m√∫sica por nome/tom/tag" />
                  <select id="setlist-song" required></select>
                  <input id="setlist-position" type="number" min="1" placeholder="Posi√ß√£o" required />
                  <input id="setlist-note" placeholder="Nota" />
                  <button type="submit" class="btn primary">Adicionar ao repert√≥rio</button>
                </form>

                <form id="assign-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
                  <input id="assign-user-query" placeholder="Buscar volunt√°rio por nome" />
                  <select id="assign-user" required></select>
                  <input id="assign-role" placeholder="Fun√ß√£o na escala" required />
                  <button id="assign-submit" type="submit" class="btn primary">Adicionar volunt√°rio</button>
                </form>
                <p id="assign-availability-warning" class="warning-msg hidden"></p>

                <form id="self-assign-form" class="form-grid" data-role="VOLUNTARIO">
                  <input id="self-assign-role" placeholder="Fun√ß√£o que deseja servir" required />
                  <button type="submit" class="btn primary">Me inscrever neste culto</button>
                </form>

                <div id="service-detail-boards"></div>
              </div>
            </div>
          </div>
        </section>

        <section id="tab-planejamento" class="card panel hidden">
          <h2>Planejamento Avan√ßado</h2>
          <form id="repeat-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
            <select id="repeat-source-service" required></select>
            <input id="repeat-start" type="date" required />
            <input id="repeat-end" type="date" required />
            <input id="repeat-interval" type="number" min="1" value="7" placeholder="Intervalo (dias)" />
            <input id="repeat-prefix" placeholder="Prefixo de t√≠tulo (opcional)" />
            <button type="submit" class="btn primary">Repetir culto + escala</button>
          </form>
          <div id="repeat-result" class="highlight"></div>

          <h3>Criar cultos em massa (dia da semana)</h3>
          <form id="bulk-service-form" class="form-grid" data-role="ADMIN,LIDER_MINISTERIO">
            <input id="bulk-start" type="date" required />
            <input id="bulk-end" type="date" required />
            <input id="bulk-weekdays" placeholder="Dias da semana (ex: 0,4)" required />
            <input id="bulk-morning-title" placeholder="T√≠tulo manh√£ (opcional)" value="Culto da Manh√£" />
            <input id="bulk-morning-time" type="time" value="09:00" />
            <input id="bulk-night-title" placeholder="T√≠tulo noite (opcional)" value="Culto da Noite" />
            <input id="bulk-night-time" type="time" value="19:00" />
            <input id="bulk-notes" placeholder="Observa√ß√µes padr√£o" />
            <button type="submit" class="btn primary">Criar cultos em massa</button>
          </form>
          <div id="bulk-result" class="highlight"></div>
        </section>

        <section id="tab-aprovacoes" class="card panel hidden">
          <h2>Fila de Aprova√ß√£o</h2>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Culto</th>
                  <th>Volunt√°rio</th>
                  <th>Fun√ß√£o</th>
                  <th>A√ß√£o</th>
                </tr>
              </thead>
              <tbody id="approvals-table"></tbody>
            </table>
          </div>
          <h3>Solicita√ß√µes de troca de escala</h3>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Data</th>
                  <th>Culto</th>
                  <th>Volunt√°rio</th>
                  <th>Fun√ß√£o</th>
                  <th>Motivo</th>
                  <th>A√ß√£o</th>
                </tr>
              </thead>
              <tbody id="swap-requests-table"></tbody>
            </table>
          </div>
        </section>

        <section id="tab-notificacoes" class="card panel hidden">
          <h2>Notifica√ß√µes</h2>
          <form id="notify-test-form" class="form-grid">
            <select id="notify-channel">
              <option value="PUSH">Push</option>
              <option value="WHATSAPP">WhatsApp</option>
              <option value="EMAIL">E-mail</option>
            </select>
            <button type="submit" class="btn primary">Enviar teste</button>
            <button id="notify-reminders-btn" type="button" class="btn ghost" data-role="ADMIN,LIDER_MINISTERIO">Enviar lembretes pendentes</button>
          </form>

          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Quando</th>
                  <th>Canal</th>
                  <th>Evento</th>
                  <th>Destino</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="notifications-table"></tbody>
            </table>
          </div>
        </section>

        <section id="tab-registros" class="card panel hidden">
          <h2>Registros de Auditoria</h2>
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Quando</th>
                  <th>A√ß√£o</th>
                  <th>Entidade</th>
                  <th>Usu√°rio</th>
                  <th>Detalhes</th>
                </tr>
              </thead>
              <tbody id="logs-table"></tbody>
            </table>
          </div>
        </section>

        <section id="tab-ministerios" class="card panel hidden">
          <h2>Minist√©rios</h2>
          <form id="ministry-form" class="form-grid" data-role="ADMIN">
            <input id="ministry-name" placeholder="Nome do minist√©rio" required />
            <input id="ministry-description" placeholder="Descri√ß√£o" />
            <button type="submit" class="btn primary">Criar minist√©rio</button>
          </form>
          <ul id="ministries-list" class="list"></ul>
        </section>
      </section>
    </main>

    <div id="account-modal" class="modal-backdrop hidden">
      <div class="modal-card account-modal-card">
        <div class="modal-head">
          <h3>Painel do Usu√°rio</h3>
          <button id="account-modal-close" class="btn ghost" type="button">Fechar</button>
        </div>
        <div class="account-grid">
          <section class="card mini-panel">
            <h3>Perfil</h3>
            <img id="account-photo-preview" class="account-photo" alt="Foto do perfil" src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=220&q=80" />
            <input id="profile-photo-input" type="file" accept="image/*" class="hidden" />
            <button id="profile-photo-btn" class="btn ghost" type="button">Trocar foto</button>
            <p id="account-user-line" class="kicker"></p>
          </section>
          <section class="card mini-panel">
            <h3>Trocar Senha</h3>
            <form id="change-password-form" class="stack">
              <input id="current-password" type="password" placeholder="Senha atual" required />
              <input id="new-password" type="password" placeholder="Nova senha" required />
              <input id="confirm-password" type="password" placeholder="Confirmar nova senha" required />
              <button type="submit" class="btn primary">Salvar nova senha</button>
            </form>
          </section>
          <section class="card mini-panel">
            <h3>Meus Minist√©rios</h3>
            <ul id="account-ministries" class="list"></ul>
          </section>
        </div>
      </div>
    </div>

    <script src="/app/app.js"></script>
  </body>
</html>
